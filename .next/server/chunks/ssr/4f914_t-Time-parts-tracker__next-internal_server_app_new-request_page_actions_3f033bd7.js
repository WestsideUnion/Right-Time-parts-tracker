module.exports=[16377,a=>{"use strict";var b=a.i(51548),c=a.i(14656),d=a.i(69439);async function e(a,b){let e=await (0,c.createClient)(),{data:{user:f},error:g}=await e.auth.getUser();if(g||!f)return{error:"Not authenticated"};if(!a||0===a.length)return{error:"At least one item is required"};for(let b of a){if(!b.job_bag_number?.trim())return{error:"Job bag number is required for all items"};if(!b.manufacturer?.trim())return{error:"Manufacturer is required for all items"};if(!b.part_name?.trim())return{error:"Part name is required for all items"};if(!b.quantity||b.quantity<1)return{error:"Quantity must be at least 1 for all items"}}let{data:h,error:i}=await e.from("requests").insert({created_by:f.id,notes:b||null}).select().single();if(i)return console.error("Error creating request:",i),{error:"Failed to create request"};let j=a.map(a=>({request_id:h.id,job_bag_number:a.job_bag_number.trim(),manufacturer:a.manufacturer.trim(),part_name:a.part_name.trim(),description:a.description?.trim()||null,quantity:a.quantity,created_by:f.id})),{error:k}=await e.from("request_items").insert(j);return k?(console.error("Error creating items:",k),await e.from("requests").delete().eq("id",h.id),{error:"Failed to create items"}):((0,d.revalidatePath)("/receiving"),(0,d.revalidatePath)("/pick-list"),{success:!0,requestId:h.id})}(0,a.i(9303).ensureServerEntryExports)([e]),(0,b.registerServerReference)(e,"604f554f4cb3a3214ee82e25040ede4dc54e4296b8",null),a.s([],85482),a.i(85482),a.s(["604f554f4cb3a3214ee82e25040ede4dc54e4296b8",()=>e],16377)}];

//# sourceMappingURL=4f914_t-Time-parts-tracker__next-internal_server_app_new-request_page_actions_3f033bd7.js.map