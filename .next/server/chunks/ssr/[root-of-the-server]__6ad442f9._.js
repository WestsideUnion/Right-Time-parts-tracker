module.exports=[96878,(a,b,c)=>{"use strict";b.exports=a.r(76669).vendored["react-ssr"].React},5221,(a,b,c)=>{"use strict";b.exports=a.r(76669).vendored["react-ssr"].ReactDOM},60143,(a,b,c)=>{"use strict";b.exports=a.r(76669).vendored.contexts.AppRouterContext},17570,(a,b,c)=>{"use strict";b.exports=a.r(76669).vendored.contexts.HooksClientContext},46378,(a,b,c)=>{"use strict";b.exports=a.r(76669).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},76669,(a,b,c)=>{"use strict";b.exports=a.r(18622)},46188,(a,b,c)=>{"use strict";b.exports=a.r(76669).vendored["react-ssr"].ReactJsxRuntime},24188,(a,b,c)=>{"use strict";b.exports=a.r(76669).vendored["react-ssr"].ReactServerDOMTurbopackClient},26723,a=>{"use strict";var b=a.i(9375),c=(0,b.createServerReference)("603bc9c1796a7171c7c35f5d7b98d44b8252b48f8f",b.callServer,void 0,b.findSourceMapURL,"updateStaffStatus");a.s(["updateStaffStatus",()=>c])},56010,5791,a=>{"use strict";var b=a.i(46188),c=a.i(96878);let d=[{value:null,label:"Pending",color:"bg-slate-600"},{value:"ordered",label:"Ordered",color:"bg-blue-600"},{value:"backorder",label:"Backorder",color:"bg-amber-600"},{value:"discontinued",label:"Discontinued",color:"bg-red-600"}],e=[{value:null,label:"Pending",color:"bg-slate-600"},{value:"received",label:"Received",color:"bg-green-600"},{value:"part_defective",label:"Part Defective",color:"bg-orange-600"},{value:"installed",label:"Installed",color:"bg-emerald-600"}];function f({type:a,currentValue:f,onChange:g,disabled:h=!1,isDiscontinued:i=!1}){let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(f),p=(0,c.useRef)(null),q="boss"===a?d:e,r=q.find(a=>a.value===n)||q[0];(0,c.useEffect)(()=>{o(f)},[f]),(0,c.useEffect)(()=>{let a=a=>{p.current&&!p.current.contains(a.target)&&k(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let s=async a=>{if(a===n)return void k(!1);o(a),k(!1),m(!0);try{await g(a)}catch(a){o(n),console.error("Failed to update status:",a)}finally{m(!1)}},t=h||l||"staff"===a&&i;return(0,b.jsxs)("div",{className:"relative",ref:p,children:[(0,b.jsxs)("button",{onClick:()=>!t&&k(!j),disabled:t,className:`
          inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium
          transition-all duration-200
          ${r.color} text-white
          ${t?"opacity-50 cursor-not-allowed":"hover:opacity-90 cursor-pointer shadow-sm hover:shadow"}
          ${l?"animate-pulse":""}
        `,children:[(0,b.jsx)("span",{children:r.label}),!t&&(0,b.jsx)("svg",{className:`w-4 h-4 transition-transform ${j?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&(0,b.jsx)("div",{className:"absolute z-50 mt-1 w-44 rounded-lg bg-slate-800 border border-slate-700 shadow-xl overflow-hidden",children:q.map(a=>(0,b.jsxs)("button",{onClick:()=>s(a.value),className:`
                w-full px-4 py-2.5 text-left text-sm font-medium flex items-center gap-2
                transition-colors
                ${a.value===n?"bg-slate-700 text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}
              `,children:[(0,b.jsx)("span",{className:`w-2.5 h-2.5 rounded-full ${a.color}`}),a.label]},a.value??"null"))}),"staff"===a&&i&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:"Item discontinued"})]})}var g=a.i(73043);function h({items:a,userRole:d,onBossStatusChange:e,onStaffStatusChange:h,onDeleteItem:i,filters:j={},selectable:k=!1,selectedIds:l=[],onSelectionChange:m}){let[n,o]=(0,c.useState)("created_at"),[p,q]=(0,c.useState)("desc"),[r,s]=(0,c.useState)(null),t=(0,c.useMemo)(()=>{let b=[...a];if(j.search){let a=j.search.toLowerCase();b=b.filter(b=>b.part_name.toLowerCase().includes(a)||b.manufacturer.toLowerCase().includes(a)||b.job_bag_number.toLowerCase().includes(a)||b.description?.toLowerCase().includes(a))}return void 0!==j.boss_status&&"all"!==j.boss_status&&(b=null===j.boss_status||""===j.boss_status?b.filter(a=>null===a.boss_status):b.filter(a=>a.boss_status===j.boss_status)),void 0!==j.staff_status&&"all"!==j.staff_status&&(b=null===j.staff_status||""===j.staff_status?b.filter(a=>null===a.staff_status):b.filter(a=>a.staff_status===j.staff_status)),j.manufacturer&&(b=b.filter(a=>a.manufacturer===j.manufacturer)),j.job_bag_number&&(b=b.filter(a=>a.job_bag_number===j.job_bag_number)),b.sort((a,b)=>{let c=a[n]??"",d=b[n]??"",e=String(c).localeCompare(String(d));return"asc"===p?e:-e}),b},[a,j,n,p]),u=a=>{n===a?q("asc"===p?"desc":"asc"):(o(a),q("asc"))},v=a=>{l.includes(a)?m?.(l.filter(b=>b!==a)):m?.([...l,a])},w=({field:a})=>(0,b.jsx)("svg",{className:`w-4 h-4 inline ml-1 transition-transform ${n===a?"asc"===p?"":"rotate-180":"opacity-30"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})});return 0===t.length?(0,b.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 p-12 text-center",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-300 mb-1",children:"No items found"}),(0,b.jsx)("p",{className:"text-slate-500",children:"Try adjusting your filters or search query."})]}):(0,b.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-visible",children:[(0,b.jsx)("div",{className:"hidden lg:block",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-700 bg-slate-900/50",children:[k&&(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:(0,b.jsx)("input",{type:"checkbox",checked:l.length===t.length&&t.length>0,onChange:()=>{l.length===t.length?m?.([]):m?.(t.map(a=>a.id))},className:"w-4 h-4 rounded border-slate-600 bg-slate-800 text-blue-600 focus:ring-blue-500 focus:ring-offset-slate-800"})}),(0,b.jsxs)("th",{onClick:()=>u("job_bag_number"),className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider cursor-pointer hover:text-slate-200",children:["Job Bag ",(0,b.jsx)(w,{field:"job_bag_number"})]}),(0,b.jsxs)("th",{onClick:()=>u("manufacturer"),className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider cursor-pointer hover:text-slate-200",children:["Manufacturer ",(0,b.jsx)(w,{field:"manufacturer"})]}),(0,b.jsxs)("th",{onClick:()=>u("part_name"),className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider cursor-pointer hover:text-slate-200",children:["Part Name ",(0,b.jsx)(w,{field:"part_name"})]}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Qty"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Boss Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Staff Status"}),"system_admin"===d&&(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:t.map(a=>(0,b.jsxs)("tr",{className:`hover:bg-slate-800/80 transition-colors ${l.includes(a.id)?"bg-blue-900/20":""}`,children:[k&&(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("input",{type:"checkbox",checked:l.includes(a.id),onChange:()=>v(a.id),className:"w-4 h-4 rounded border-slate-600 bg-slate-800 text-blue-600 focus:ring-blue-500 focus:ring-offset-slate-800"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(g.default,{href:`/job-bag/${a.job_bag_number}`,className:"text-blue-400 hover:text-blue-300 font-medium",children:a.job_bag_number})}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-300",children:a.manufacturer}),(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"text-white font-medium",children:a.part_name}),a.description&&(0,b.jsx)("div",{className:"text-slate-500 text-sm truncate max-w-xs",children:a.description})]}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-300",children:a.quantity}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(f,{type:"boss",currentValue:a.boss_status,onChange:b=>e?.(a.id,b)??Promise.resolve(),disabled:"boss"!==d&&"system_admin"!==d})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(f,{type:"staff",currentValue:a.staff_status,onChange:b=>h?.(a.id,b)??Promise.resolve(),disabled:"staff"!==d&&"system_admin"!==d,isDiscontinued:"discontinued"===a.boss_status})}),"system_admin"===d&&(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("button",{onClick:async()=>{if(confirm("Are you sure you want to delete this item? This action cannot be undone.")){s(a.id);try{await i?.(a.id)}finally{s(null)}}},disabled:r===a.id,className:"px-3 py-1.5 text-xs font-medium text-red-400 hover:text-white hover:bg-red-600 border border-red-600 rounded-lg transition-colors disabled:opacity-50",children:r===a.id?"Deleting...":"Delete"})})]},a.id))})]})}),(0,b.jsx)("div",{className:"lg:hidden divide-y divide-slate-700/50",children:t.map(a=>(0,b.jsxs)("div",{className:`p-4 space-y-3 ${l.includes(a.id)?"bg-blue-900/20":""}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[k&&(0,b.jsx)("input",{type:"checkbox",checked:l.includes(a.id),onChange:()=>v(a.id),className:"mt-1 w-4 h-4 rounded border-slate-600 bg-slate-800 text-blue-600 focus:ring-blue-500 focus:ring-offset-slate-800"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)(g.default,{href:`/job-bag/${a.job_bag_number}`,className:"text-blue-400 hover:text-blue-300 font-medium text-sm",children:a.job_bag_number}),(0,b.jsx)("span",{className:"text-slate-500",children:"•"}),(0,b.jsx)("span",{className:"text-slate-400 text-sm",children:a.manufacturer})]}),(0,b.jsx)("h3",{className:"text-white font-medium mt-1",children:a.part_name}),a.description&&(0,b.jsx)("p",{className:"text-slate-500 text-sm mt-0.5",children:a.description})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("span",{className:"text-slate-400 text-sm",children:"Qty:"}),(0,b.jsx)("span",{className:"text-white font-medium ml-1",children:a.quantity})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-slate-500 text-xs",children:"Boss:"}),(0,b.jsx)(f,{type:"boss",currentValue:a.boss_status,onChange:b=>e?.(a.id,b)??Promise.resolve(),disabled:"boss"!==d&&"system_admin"!==d})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-slate-500 text-xs",children:"Staff:"}),(0,b.jsx)(f,{type:"staff",currentValue:a.staff_status,onChange:b=>h?.(a.id,b)??Promise.resolve(),disabled:"staff"!==d&&"system_admin"!==d,isDiscontinued:"discontinued"===a.boss_status})]}),"system_admin"===d&&(0,b.jsx)("button",{onClick:async()=>{if(confirm("Are you sure you want to delete this item?")){s(a.id);try{await i?.(a.id)}finally{s(null)}}},disabled:r===a.id,className:"px-3 py-1.5 text-xs font-medium text-red-400 hover:text-white hover:bg-red-600 border border-red-600 rounded-lg transition-colors disabled:opacity-50",children:r===a.id?"Deleting...":"Delete"})]})]},a.id))}),(0,b.jsxs)("div",{className:"px-4 py-3 bg-slate-900/50 border-t border-slate-700 text-sm text-slate-400",children:["Showing ",t.length," of ",a.length," items"]})]})}a.s(["default",()=>h],56010);var i=a.i(9375),j=(0,i.createServerReference)("40605760b4b2861f02c3e9b7270eb1eb8b0c7420b3",i.callServer,void 0,i.findSourceMapURL,"deleteItem");a.s(["deleteItem",()=>j],5791)},99228,a=>{"use strict";var b=a.i(9375),c=(0,b.createServerReference)("60f1ae99487034e3add282dc86cabe0168420d0dfe",b.callServer,void 0,b.findSourceMapURL,"updateBossStatus");a.s(["updateBossStatus",()=>c])},15719,a=>{"use strict";var b=a.i(46188),c=a.i(56010),d=a.i(99228),e=a.i(26723),f=a.i(5791),g=a.i(96878);function h({items:a,auditLogs:h,userRole:i}){let[j,k]=(0,g.useState)(a),l=async(b,c)=>{k(a=>a.map(a=>a.id===b?{...a,boss_status:c}:a));try{await (0,d.updateBossStatus)(b,c)}catch(b){throw k(a),b}},m=async(b,c)=>{k(a=>a.map(a=>a.id===b?{...a,staff_status:c}:a));try{await (0,e.updateStaffStatus)(b,c)}catch(b){throw k(a),b}},n=async b=>{k(a=>a.filter(a=>a.id!==b));try{await (0,f.deleteItem)(b)}catch(b){throw k(a),b}},o=a=>a&&"pending"!==a?a.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):"Pending";return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Items"}),(0,b.jsx)(c.default,{items:j,userRole:i,onBossStatusChange:"boss"===i||"system_admin"===i?l:void 0,onStaffStatusChange:"staff"===i||"system_admin"===i?m:void 0,onDeleteItem:"system_admin"===i?n:void 0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Activity History"}),0===h.length?(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-8 text-center",children:[(0,b.jsx)("svg",{className:"w-10 h-10 mx-auto text-slate-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("p",{className:"text-slate-400",children:"No status changes recorded yet."})]}):(0,b.jsx)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:(0,b.jsx)("div",{className:"divide-y divide-slate-700/50",children:h.map(a=>(0,b.jsxs)("div",{className:"p-4 flex items-start gap-4",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${"boss_status"===a.field_changed?"bg-purple-900/50 text-purple-400":"bg-blue-900/50 text-blue-400"}`,children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"boss_status"===a.field_changed?"bg-purple-900/50 text-purple-300":"bg-blue-900/50 text-blue-300"}`,children:"boss_status"===a.field_changed?"Boss Status":"Staff Status"}),(0,b.jsx)("span",{className:"text-slate-500 text-sm",children:new Date(a.changed_at).toLocaleString()})]}),(0,b.jsxs)("p",{className:"text-white mt-1",children:[(0,b.jsx)("span",{className:"text-slate-400",children:o(a.old_value)}),(0,b.jsx)("span",{className:"text-slate-600 mx-2",children:"→"}),(0,b.jsx)("span",{className:"font-medium",children:o(a.new_value)})]})]})]},a.id))})})]})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6ad442f9._.js.map